<footer class="site-footer" id="siteFooter">
  <div class="site-footer-inner">
    <p class="site-foot-text">
      © {{ now.Format "2006" }} {{ if eq .Site.Language.Lang "zh-hant" }}{{ .Site.Title }} · Powered by Hugo & PaperMod{{ else }}{{ .Site.Title }} · Powered by Hugo & PaperMod{{ end }}
    </p>
  </div>
</footer>
<script>
(function(){
  // 去重：若主題本身還渲染另一個相同文字的 footer，移除後者
  const seen=new Set();
  document.querySelectorAll('.site-foot-text').forEach(p=>{
    const t=p.textContent.trim();
    if(seen.has(t)) p.closest('footer')?.remove();
    else seen.add(t);
  });
})();
</script>

<!-- 注入按鈕與載入 CSS（若已存在則不重複） -->
<script>
(function(){
  // 載入 CSS（來自 /static/css/header-buttons.css）
  if(!document.getElementById('custom-topbuttons-css')){
    var l = document.createElement('link');
    l.id = 'custom-topbuttons-css';
    l.rel = 'stylesheet';
    l.href = '{{ "css/header-buttons.css" | relURL }}';
    document.head.appendChild(l);
  }

  // 建立按鈕容器
  if(!document.querySelector('.custom-topbuttons')){
    var container = document.createElement('div');
    container.className = 'custom-topbuttons';
    container.innerHTML = ''
      + '<a href="{{ "/" | relURL }}" class="cb-btn" data-name="home">首頁</a>'
      + '<a href="{{ "/posts/" | relURL }}" class="cb-btn" data-name="posts">文章</a>'
      + '<a href="{{ "/about/" | relURL }}" class="cb-btn" data-name="about">關於我</a>'
      + '<a href="{{ "/search/" | relURL }}" class="cb-btn" data-name="search">🔍 搜尋</a>';
    document.body.appendChild(container);

    // 標示當前頁面
    var path = location.pathname;
    if(!path.endsWith('/')) path += '/';
    var els = container.querySelectorAll('a.cb-btn');
    els.forEach(function(a){
      if(a.getAttribute('href') === path) a.classList.add('active');
      a.addEventListener('click', function(){
        els.forEach(function(x){ x.classList.remove('active'); });
        a.classList.add('active');
      });
    });
  }
})();
</script>
