<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Gentoo 安裝指南（新手） | Zakk's Homepage</title><meta name=keywords content="Gentoo,Linux,OpenRC,systemd,KDE,GNOME,SSH,Wayland,Btrfs,UEFI,NVIDIA,AMD,Intel,iwd,wpa_supplicant"><meta name=description content="
  
  
    💻 我的電腦配置（示例）
    0. 下載與製作安裝媒體
      
        0.1 下載 ISO（示例：台灣 NCHC）
        0.2 製作 USB 安裝碟
      
    
    1. 開機與網路
      
        1.1 確認 UEFI / BIOS
        1.2 有線網路（Live 環境）
        1.3 Wi‑Fi（兩種工具擇一）
      
    
    2. 磁碟分割（lsblk 與 cfdisk）
    3. 檔案系統格式化與掛載（ext4 / XFS / Btrfs）
      
        3.1 格式化
        3.2 掛載（完整流程）
      
    
    4. 下載 Stage3、掛載系統目錄與 chroot
      
        4.1 選擇 Stage3
        4.2 下載與解壓
        4.3 掛載系統目錄（依 init 系統不同）
        4.4 進入 chroot
      
    
    5. Portage 與鏡像源（含 makeconf 完整示例）
      
        5.1 同步 Portage 樹
        5.2 選擇鏡像源（擇一）
        5.3 /etc/portage/make.conf 完整示例（含註解）
      
    
    6. USE flags 與 License（新手解法）
      
        6.1 查詢與理解 USE
        6.2 對單一套件加入 USE（用 echo，避免手動編輯出錯）
        6.3 同意授權（例：Chrome）
        6.4 關鍵詞（如需解鎖軟體版本）
      
    
    7. 選擇 Profile（桌面／伺服器）
    8. 本地化 Localization（語言與時區）
    9. 內核選擇與編譯（完整指令）
      
        9.1 最簡方案：預編譯內核（建議新手）
        9.2 進階方案：自行編譯（gentoo-sources）
      
    
    10. 產生 fstab（含 Btrfs / ext4 範例）
    11. 安裝開機器 GRUB（含 os-prober）
    12. 啟用網路服務（OpenRC / systemd）
    13. Wayland / X11 選擇與 USE
    14. 顯示卡與 CPU 微碼
    15. 桌面環境（可選）
    16. 使用者與 sudo
    17. SSH（可選）
    18. 重開機
  


💻 我的電腦配置（示例）

CPU：AMD Ryzen 9 7950X3D（16C/32T）
主機板：ASUS ROG STRIX X670E-A GAMING WIFI
RAM：64GB DDR5
GPU：NVIDIA RTX 4080 SUPER + AMD iGPU
儲存：NVMe SSD
雙系統：Windows 11 + Gentoo


以上為示例，步驟對多數 x86_64 平台通用。"><meta name=author content><link rel=canonical href=https://zakk.au/zh-hant/posts/gentoo-install/><link crossorigin=anonymous href=/assets/css/stylesheet.643885fd8480d5564c70ecbcd3a455f033104015abf6975cbd4cb0ea3b0445ad.css integrity="sha256-ZDiF/YSA1VZMcOy806RV8DMQQBWr9pdcvUyw6jsERa0=" rel="preload stylesheet" as=style><link rel=icon href=https://zakk.au/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://zakk.au/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://zakk.au/favicon-32x32.png><link rel=apple-touch-icon href=https://zakk.au/apple-touch-icon.png><link rel=mask-icon href=https://zakk.au/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://zakk.au/zh-hant/posts/gentoo-install/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://zakk.au/zh-hant/posts/gentoo-install/"><meta property="og:site_name" content="Zakk's Homepage"><meta property="og:title" content="Gentoo 安裝指南（新手）"><meta property="og:description" content=" 💻 我的電腦配置（示例） 0. 下載與製作安裝媒體 0.1 下載 ISO（示例：台灣 NCHC） 0.2 製作 USB 安裝碟 1. 開機與網路 1.1 確認 UEFI / BIOS 1.2 有線網路（Live 環境） 1.3 Wi‑Fi（兩種工具擇一） 2. 磁碟分割（lsblk 與 cfdisk） 3. 檔案系統格式化與掛載（ext4 / XFS / Btrfs） 3.1 格式化 3.2 掛載（完整流程） 4. 下載 Stage3、掛載系統目錄與 chroot 4.1 選擇 Stage3 4.2 下載與解壓 4.3 掛載系統目錄（依 init 系統不同） 4.4 進入 chroot 5. Portage 與鏡像源（含 makeconf 完整示例） 5.1 同步 Portage 樹 5.2 選擇鏡像源（擇一） 5.3 /etc/portage/make.conf 完整示例（含註解） 6. USE flags 與 License（新手解法） 6.1 查詢與理解 USE 6.2 對單一套件加入 USE（用 echo，避免手動編輯出錯） 6.3 同意授權（例：Chrome） 6.4 關鍵詞（如需解鎖軟體版本） 7. 選擇 Profile（桌面／伺服器） 8. 本地化 Localization（語言與時區） 9. 內核選擇與編譯（完整指令） 9.1 最簡方案：預編譯內核（建議新手） 9.2 進階方案：自行編譯（gentoo-sources） 10. 產生 fstab（含 Btrfs / ext4 範例） 11. 安裝開機器 GRUB（含 os-prober） 12. 啟用網路服務（OpenRC / systemd） 13. Wayland / X11 選擇與 USE 14. 顯示卡與 CPU 微碼 15. 桌面環境（可選） 16. 使用者與 sudo 17. SSH（可選） 18. 重開機 💻 我的電腦配置（示例） CPU：AMD Ryzen 9 7950X3D（16C/32T） 主機板：ASUS ROG STRIX X670E-A GAMING WIFI RAM：64GB DDR5 GPU：NVIDIA RTX 4080 SUPER + AMD iGPU 儲存：NVMe SSD 雙系統：Windows 11 + Gentoo 以上為示例，步驟對多數 x86_64 平台通用。"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="zh-hant"><meta property="article:published_time" content="2025-09-01T00:00:00+00:00"><meta property="article:modified_time" content="2025-09-01T00:00:00+00:00"><meta property="article:tag" content="Gentoo"><meta property="article:tag" content="Linux"><meta property="article:tag" content="OpenRC"><meta property="article:tag" content="Systemd"><meta property="article:tag" content="KDE"><meta property="article:tag" content="GNOME"><meta name=twitter:card content="summary"><meta name=twitter:title content="Gentoo 安裝指南（新手）"><meta name=twitter:description content="
  
  
    💻 我的電腦配置（示例）
    0. 下載與製作安裝媒體
      
        0.1 下載 ISO（示例：台灣 NCHC）
        0.2 製作 USB 安裝碟
      
    
    1. 開機與網路
      
        1.1 確認 UEFI / BIOS
        1.2 有線網路（Live 環境）
        1.3 Wi‑Fi（兩種工具擇一）
      
    
    2. 磁碟分割（lsblk 與 cfdisk）
    3. 檔案系統格式化與掛載（ext4 / XFS / Btrfs）
      
        3.1 格式化
        3.2 掛載（完整流程）
      
    
    4. 下載 Stage3、掛載系統目錄與 chroot
      
        4.1 選擇 Stage3
        4.2 下載與解壓
        4.3 掛載系統目錄（依 init 系統不同）
        4.4 進入 chroot
      
    
    5. Portage 與鏡像源（含 makeconf 完整示例）
      
        5.1 同步 Portage 樹
        5.2 選擇鏡像源（擇一）
        5.3 /etc/portage/make.conf 完整示例（含註解）
      
    
    6. USE flags 與 License（新手解法）
      
        6.1 查詢與理解 USE
        6.2 對單一套件加入 USE（用 echo，避免手動編輯出錯）
        6.3 同意授權（例：Chrome）
        6.4 關鍵詞（如需解鎖軟體版本）
      
    
    7. 選擇 Profile（桌面／伺服器）
    8. 本地化 Localization（語言與時區）
    9. 內核選擇與編譯（完整指令）
      
        9.1 最簡方案：預編譯內核（建議新手）
        9.2 進階方案：自行編譯（gentoo-sources）
      
    
    10. 產生 fstab（含 Btrfs / ext4 範例）
    11. 安裝開機器 GRUB（含 os-prober）
    12. 啟用網路服務（OpenRC / systemd）
    13. Wayland / X11 選擇與 USE
    14. 顯示卡與 CPU 微碼
    15. 桌面環境（可選）
    16. 使用者與 sudo
    17. SSH（可選）
    18. 重開機
  


💻 我的電腦配置（示例）

CPU：AMD Ryzen 9 7950X3D（16C/32T）
主機板：ASUS ROG STRIX X670E-A GAMING WIFI
RAM：64GB DDR5
GPU：NVIDIA RTX 4080 SUPER + AMD iGPU
儲存：NVMe SSD
雙系統：Windows 11 + Gentoo


以上為示例，步驟對多數 x86_64 平台通用。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Zh-Hants","item":"https://zakk.au/zh-hant/"},{"@type":"ListItem","position":2,"name":"文章","item":"https://zakk.au/zh-hant/posts/"},{"@type":"ListItem","position":3,"name":"Gentoo 安裝指南（新手）","item":"https://zakk.au/zh-hant/posts/gentoo-install/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Gentoo 安裝指南（新手）","name":"Gentoo 安裝指南（新手）","description":" 💻 我的電腦配置（示例） 0. 下載與製作安裝媒體 0.1 下載 ISO（示例：台灣 NCHC） 0.2 製作 USB 安裝碟 1. 開機與網路 1.1 確認 UEFI / BIOS 1.2 有線網路（Live 環境） 1.3 Wi‑Fi（兩種工具擇一） 2. 磁碟分割（lsblk 與 cfdisk） 3. 檔案系統格式化與掛載（ext4 / XFS / Btrfs） 3.1 格式化 3.2 掛載（完整流程） 4. 下載 Stage3、掛載系統目錄與 chroot 4.1 選擇 Stage3 4.2 下載與解壓 4.3 掛載系統目錄（依 init 系統不同） 4.4 進入 chroot 5. Portage 與鏡像源（含 makeconf 完整示例） 5.1 同步 Portage 樹 5.2 選擇鏡像源（擇一） 5.3 /etc/portage/make.conf 完整示例（含註解） 6. USE flags 與 License（新手解法） 6.1 查詢與理解 USE 6.2 對單一套件加入 USE（用 echo，避免手動編輯出錯） 6.3 同意授權（例：Chrome） 6.4 關鍵詞（如需解鎖軟體版本） 7. 選擇 Profile（桌面／伺服器） 8. 本地化 Localization（語言與時區） 9. 內核選擇與編譯（完整指令） 9.1 最簡方案：預編譯內核（建議新手） 9.2 進階方案：自行編譯（gentoo-sources） 10. 產生 fstab（含 Btrfs / ext4 範例） 11. 安裝開機器 GRUB（含 os-prober） 12. 啟用網路服務（OpenRC / systemd） 13. Wayland / X11 選擇與 USE 14. 顯示卡與 CPU 微碼 15. 桌面環境（可選） 16. 使用者與 sudo 17. SSH（可選） 18. 重開機 💻 我的電腦配置（示例） CPU：AMD Ryzen 9 7950X3D（16C/32T） 主機板：ASUS ROG STRIX X670E-A GAMING WIFI RAM：64GB DDR5 GPU：NVIDIA RTX 4080 SUPER + AMD iGPU 儲存：NVMe SSD 雙系統：Windows 11 + Gentoo 以上為示例，步驟對多數 x86_64 平台通用。\n","keywords":["Gentoo","Linux","OpenRC","systemd","KDE","GNOME","SSH","Wayland","Btrfs","UEFI","NVIDIA","AMD","Intel","iwd","wpa_supplicant"],"articleBody":" 💻 我的電腦配置（示例） 0. 下載與製作安裝媒體 0.1 下載 ISO（示例：台灣 NCHC） 0.2 製作 USB 安裝碟 1. 開機與網路 1.1 確認 UEFI / BIOS 1.2 有線網路（Live 環境） 1.3 Wi‑Fi（兩種工具擇一） 2. 磁碟分割（lsblk 與 cfdisk） 3. 檔案系統格式化與掛載（ext4 / XFS / Btrfs） 3.1 格式化 3.2 掛載（完整流程） 4. 下載 Stage3、掛載系統目錄與 chroot 4.1 選擇 Stage3 4.2 下載與解壓 4.3 掛載系統目錄（依 init 系統不同） 4.4 進入 chroot 5. Portage 與鏡像源（含 makeconf 完整示例） 5.1 同步 Portage 樹 5.2 選擇鏡像源（擇一） 5.3 /etc/portage/make.conf 完整示例（含註解） 6. USE flags 與 License（新手解法） 6.1 查詢與理解 USE 6.2 對單一套件加入 USE（用 echo，避免手動編輯出錯） 6.3 同意授權（例：Chrome） 6.4 關鍵詞（如需解鎖軟體版本） 7. 選擇 Profile（桌面／伺服器） 8. 本地化 Localization（語言與時區） 9. 內核選擇與編譯（完整指令） 9.1 最簡方案：預編譯內核（建議新手） 9.2 進階方案：自行編譯（gentoo-sources） 10. 產生 fstab（含 Btrfs / ext4 範例） 11. 安裝開機器 GRUB（含 os-prober） 12. 啟用網路服務（OpenRC / systemd） 13. Wayland / X11 選擇與 USE 14. 顯示卡與 CPU 微碼 15. 桌面環境（可選） 16. 使用者與 sudo 17. SSH（可選） 18. 重開機 💻 我的電腦配置（示例） CPU：AMD Ryzen 9 7950X3D（16C/32T） 主機板：ASUS ROG STRIX X670E-A GAMING WIFI RAM：64GB DDR5 GPU：NVIDIA RTX 4080 SUPER + AMD iGPU 儲存：NVMe SSD 雙系統：Windows 11 + Gentoo 以上為示例，步驟對多數 x86_64 平台通用。\n0. 下載與製作安裝媒體 官方鏡像列表：https://www.gentoo.org/downloads/mirrors/\n中國大陸：通常必須使用境內鏡像（中科大 USTC / 清華 TUNA / 阿里雲），否則下載速度與連線穩定性可能不足。 台灣：建議使用 NCHC；澳洲：AARNET。 0.1 下載 ISO（示例：台灣 NCHC） wget https://free.nchc.org.tw/gentoo/releases/amd64/autobuilds/current-install-amd64-minimal/install-amd64-minimal.iso 若在中國大陸，可將網址換成：https://mirrors.ustc.edu.cn/gentoo/、https://mirrors.tuna.tsinghua.edu.cn/gentoo/ 或 https://mirrors.aliyun.com/gentoo/。\n0.2 製作 USB 安裝碟 Linux（dd）：\nsudo dd if=install-amd64-minimal.iso of=/dev/sdX bs=4M status=progress oflag=sync 將 sdX 換成 USB 裝置名稱（如 /dev/sdb）。\nWindows（Rufus）：https://rufus.ie/\n選擇 USB 與 Gentoo ISO 模式選 dd 模式（非 ISO 模式） Start 1. 開機與網路 1.1 確認 UEFI / BIOS ls /sys/firmware/efi 有輸出 → UEFI；沒有 → Legacy BIOS。\n1.2 有線網路（Live 環境） ip a dhcpcd eno1 ping -c 3 gentoo.org 1.3 Wi‑Fi（兩種工具擇一） wpa_supplicant：\niw dev wpa_passphrase \"SSID\" \"PASSWORD\" | tee /etc/wpa_supplicant/wpa_supplicant.conf wpa_supplicant -B -i wlp9s0 -c /etc/wpa_supplicant/wpa_supplicant.conf dhcpcd wlp9s0 ping -c 3 gentoo.org iwd（更簡單，推薦新手）：\nemerge net-wireless/iwd systemctl enable iwd systemctl start iwd iwctl [iwd]# device list [iwd]# station wlp9s0 scan [iwd]# station wlp9s0 get-networks [iwd]# station wlp9s0 connect SSID 若 WPA3 不穩，先改用 WPA2 試試。\n2. 磁碟分割（lsblk 與 cfdisk） 檢視磁碟：\nlsblk -o NAME,SIZE,TYPE,MOUNTPOINT 範例：\nnvme0n1 476G disk ├─nvme0n1p1 512M part ├─nvme0n1p2 1G part ├─nvme0n1p3 100G part └─nvme0n1p4 375G part 啟動分割工具（可選）：\ncfdisk /dev/nvme0n1 建議分割（UEFI）：\n大小 檔案系統 掛載點 說明 512M FAT32 /efi ESP（UEFI 系統分割區） 1G ext4 /boot kernel、initramfs 100G+ ext4 / XFS / Btrfs / 根分割區 其餘 ext4 / XFS / Btrfs /home 使用者家目錄 你也可以選擇只有 / 與 /efi 的簡化方案。\n3. 檔案系統格式化與掛載（ext4 / XFS / Btrfs） 3.1 格式化 ext4：\nmkfs.ext4 -L root /dev/nvme0n1p3 mkfs.ext4 -L home /dev/nvme0n1p4 XFS：\nmkfs.xfs -L root /dev/nvme0n1p3 mkfs.xfs -L home /dev/nvme0n1p4 Btrfs（必要時可用 -f 強制覆蓋，⚠️ 會抹除該分割區資料）：\nmkfs.btrfs -L rootfs /dev/nvme0n1p3 mkfs.btrfs -L home /dev/nvme0n1p4 # 需要強制時：mkfs.btrfs -f -L rootfs /dev/nvme0n1p3 3.2 掛載（完整流程） ext4 / XFS：\nmount /dev/nvme0n1p3 /mnt/gentoo mkdir -p /mnt/gentoo/{boot,home,efi} mount /dev/nvme0n1p4 /mnt/gentoo/home mount /dev/nvme0n1p2 /mnt/gentoo/boot mount /dev/nvme0n1p1 /mnt/gentoo/efi Btrfs（子卷）：\nmount /dev/nvme0n1p3 /mnt/gentoo btrfs subvolume create /mnt/gentoo/@ btrfs subvolume create /mnt/gentoo/@home umount /mnt/gentoo mount -o compress=zstd,subvol=@ /dev/nvme0n1p3 /mnt/gentoo mkdir -p /mnt/gentoo/{boot,home,efi} mount -o subvol=@home /dev/nvme0n1p3 /mnt/gentoo/home mount /dev/nvme0n1p2 /mnt/gentoo/boot mount /dev/nvme0n1p1 /mnt/gentoo/efi 4. 下載 Stage3、掛載系統目錄與 chroot 4.1 選擇 Stage3 建議下載 標準 Stage3（glibc），依需求選 OpenRC 或 systemd。 「desktop」Stage3 只是預設桌面化 USE，非必須；用標準 Stage3 + 正確 Profile 更靈活。 4.2 下載與解壓 cd /mnt/gentoo links https://www.gentoo.org/downloads/mirrors/ tar xpvf stage3-*.tar.xz --xattrs-include='*.*' --numeric-owner 同 ISO，一樣可選擇就近的鏡像源下載 Stage3。\n4.3 掛載系統目錄（依 init 系統不同） OpenRC：\nmount -t proc /proc /mnt/gentoo/proc mount --rbind /sys /mnt/gentoo/sys mount --rbind /dev /mnt/gentoo/dev systemd：\nmount -t proc /proc /mnt/gentoo/proc mount --rbind /sys /mnt/gentoo/sys \u0026\u0026 mount --make-rslave /mnt/gentoo/sys mount --rbind /dev /mnt/gentoo/dev \u0026\u0026 mount --make-rslave /mnt/gentoo/dev mount --rbind /run /mnt/gentoo/run \u0026\u0026 mount --make-rslave /mnt/gentoo/run 4.4 進入 chroot chroot /mnt/gentoo /bin/bash source /etc/profile export PS1=\"(chroot) $PS1\" 5. Portage 與鏡像源（含 makeconf 完整示例） 5.1 同步 Portage 樹 emerge-webrsync emerge --sync 5.2 選擇鏡像源（擇一） 互動工具：\nemerge --ask app-portage/mirrorselect mirrorselect -i -o \u003e\u003e /etc/portage/make.conf 手動指定（建議最終只保留一條）：\necho 'GENTOO_MIRRORS=\"https://free.nchc.org.tw/gentoo/\"' \u003e\u003e /etc/portage/make.conf ⚠️ 避免重複與衝突：mirrorselect 可能加入多條鏡像，建議最後僅保留速度最快的一條。\n5.3 /etc/portage/make.conf 完整示例（含註解） # 編譯器參數：O2 與 pipe 足夠，多數情況不需要 -Ofast COMMON_FLAGS=\"-march=native -O2 -pipe\" # 平行編譯：通常設成 CPU 執行緒數 MAKEOPTS=\"-j32\" # Portage 預設行為：互動、詳細、拉進建置依賴、完整圖 EMERGE_DEFAULT_OPTS=\"--ask --verbose --with-bdeps=y --complete-graph=y\" # 鏡像：請最終僅保留一條（下例為台灣 NCHC） GENTOO_MIRRORS=\"https://free.nchc.org.tw/gentoo/\" # 全域 USE（兩套典型選擇二擇一；也可同時保留 xwayland 做相容） USE=\"wayland egl pipewire vulkan\" # USE=\"X xwayland egl pipewire vulkan\" # 顯示卡：請只填你的硬體（不要全抄） # 例：NVIDIA 新卡 VIDEO_CARDS=\"nvidia\" # 例：AMD # VIDEO_CARDS=\"amdgpu radeonsi\" # 例：Intel # VIDEO_CARDS=\"intel i965 iris\" # 例：老 NVIDIA 或想用開源 # VIDEO_CARDS=\"nouveau\" # 接受授權：新手可暫時開放全部，之後細化至 package.license ACCEPT_LICENSE=\"*\" 6. USE flags 與 License（新手解法） 6.1 查詢與理解 USE emerge -pv firefox 閱讀輸出中 USE=\"...\" 與遮罩提示，了解需要啟用或停用哪些旗標。\n6.2 對單一套件加入 USE（用 echo，避免手動編輯出錯） echo \"media-video/ffmpeg X wayland\" \u003e\u003e /etc/portage/package.use/ffmpeg 6.3 同意授權（例：Chrome） echo \"www-client/google-chrome google-chrome\" \u003e\u003e /etc/portage/package.license 6.4 關鍵詞（如需解鎖軟體版本） echo \"www-client/google-chrome ~amd64\" \u003e\u003e /etc/portage/package.accept_keywords 僅在需要較新（測試）版本時使用。\n7. 選擇 Profile（桌面／伺服器） 列出可用 Profile：\neselect profile list 常見選擇：\nKDE + systemd：default/linux/amd64/23.0/desktop/plasma/systemd GNOME + systemd：default/linux/amd64/23.0/desktop/gnome/systemd 桌面 + OpenRC：default/linux/amd64/23.0/desktop 或對應 plasma/openrc 變體 伺服器：default/linux/amd64/23.0（較精簡） 套用並更新系統：\neselect profile set \u003c編號\u003e emerge -avuDN @world Profile 會設定一組預設 USE 與方向；需要時可透過 package.use 做細部微調。\n8. 本地化 Localization（語言與時區） 語言（/etc/locale.gen）：\nen_US.UTF-8 UTF-8 zh_TW.UTF-8 UTF-8 產生並套用：\nlocale-gen eselect locale set en_US.utf8 時區：\nls /usr/share/zoneinfo echo \"Asia/Taipei\" \u003e /etc/timezone emerge --config sys-libs/timezone-data 完整清單：https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\n字型與輸入法（可選）：\nemerge media-fonts/noto-cjk emerge app-i18n/fcitx5 app-i18n/fcitx5-rime 9. 內核選擇與編譯（完整指令） 9.1 最簡方案：預編譯內核（建議新手） emerge sys-kernel/gentoo-kernel-bin 9.2 進階方案：自行編譯（gentoo-sources） emerge sys-kernel/gentoo-sources cd /usr/src/linux make menuconfig # 啟用你的硬體：NVMe、ext4、（需要則）Btrfs、GPU、USB、網卡等 make -j\"$(nproc)\" make modules_install make install 可選：建立 initramfs（Btrfs、LUKS、RAID 或模組化驅動建議使用）\n用 dracut： emerge sys-kernel/dracut dracut --kver \"$(ls /lib/modules | sort -V | tail -1)\" 用 genkernel： emerge sys-kernel/genkernel genkernel initramfs 10. 產生 fstab（含 Btrfs / ext4 範例） 查詢 UUID：\nblkid lsblk -f ext4：\nUUID= /efi vfat noatime,umask=0077 0 2 UUID= /boot ext4 noatime 0 2 UUID= / ext4 noatime 0 1 UUID= /home ext4 noatime 0 2 Btrfs（子卷）：\nUUID= /efi vfat noatime,umask=0077 0 2 UUID= / btrfs noatime,compress=zstd,subvol=@ 0 1 UUID= /home btrfs noatime,compress=zstd,subvol=@home 0 2 11. 安裝開機器 GRUB（含 os-prober） emerge grub efibootmgr grub-install --target=x86_64-efi --efi-directory=/efi --bootloader-id=Gentoo emerge --ask sys-boot/os-prober echo 'GRUB_DISABLE_OS_PROBER=false' \u003e\u003e /etc/default/grub grub-mkconfig -o /boot/grub/grub.cfg 若 root 用 Btrfs，建議安裝工具：\nemerge --ask sys-fs/btrfs-progs 12. 啟用網路服務（OpenRC / systemd） systemd（桌面常用）：\nemerge net-misc/networkmanager systemctl enable NetworkManager OpenRC（傳統）：\nemerge net-misc/dhcpcd rc-update add dhcpcd default 13. Wayland / X11 選擇與 USE Wayland 為主：\nUSE=\"wayland egl pipewire vulkan\" X11 相容性較佳（舊程式／部分遊戲）：\nUSE=\"X xwayland egl pipewire vulkan\" 兩者都可用，但請依需求調整。\n14. 顯示卡與 CPU 微碼 NVIDIA 專有驅動：\nVIDEO_CARDS=\"nvidia\" emerge x11-drivers/nvidia-drivers NVIDIA 開源 nouveau（效能較低）：\nVIDEO_CARDS=\"nouveau\" emerge x11-base/xorg-drivers AMD：\nVIDEO_CARDS=\"amdgpu radeonsi\" emerge mesa vulkan-loader Intel：\nVIDEO_CARDS=\"intel i965 iris\" emerge mesa vulkan-loader CPU 微碼：\n# Intel emerge sys-firmware/intel-microcode # AMD emerge sys-firmware/amd-ucode 15. 桌面環境（可選） KDE Plasma：\nemerge kde-plasma/plasma-meta x11-misc/sddm x11-base/xwayland systemctl enable sddm GNOME：\nemerge gnome-base/gnome gnome-base/gdm systemctl enable gdm 16. 使用者與 sudo passwd useradd -m -G wheel,audio,video,usb -s /bin/bash zakk passwd zakk emerge app-admin/sudo echo \"%wheel ALL=(ALL) ALL\" \u003e\u003e /etc/sudoers ⚠️ 注意：這裡的 zakk 只是範例，請替換為你自己的使用者名稱。\n17. SSH（可選） emerge net-misc/openssh systemctl enable sshd \u0026\u0026 systemctl start sshd 18. 重開機 exit umount -R /mnt/gentoo reboot 💡 常見問題 FAQ 下載慢／超時：中國大陸請用境內鏡像；其他地區選最近鏡像。 Wi‑Fi 連不上：先檢查驅動與介面名稱，WPA3 不穩改 WPA2。 Wayland / X11：AMD/Intel 新平台可優先 Wayland；相容性需求選 X11 + xwayland。 NVIDIA 選擇：RTX 4000 建議 nvidia-drivers；舊卡或純開源取向可試 nouveau（效能較低）。 USE 衝突：emerge -pv \u003c套件\u003e 看提示，將建議的 USE 寫入 /etc/portage/package.use/。 License 阻擋：把授權加入 /etc/portage/package.license。 需要新版：用 /etc/portage/package.accept_keywords 解鎖。 Btrfs + LUKS/RAID：建議使用 initramfs（dracut 或 genkernel）。 📎 參考 Gentoo Handbook：https://wiki.gentoo.org/wiki/Handbook:AMD64/Full/Installation Bitbili：https://bitbili.net/gentoo-linux-installation-and-usage-tutorial.html Rufus：https://rufus.ie/ 時區列表（tz database）：https://en.wikipedia.org/wiki/List_of_tz_database_time_zones ","wordCount":"1066","inLanguage":"en","datePublished":"2025-09-01T00:00:00Z","dateModified":"2025-09-01T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://zakk.au/zh-hant/posts/gentoo-install/"},"publisher":{"@type":"Organization","name":"Zakk's Homepage","logo":{"@type":"ImageObject","url":"https://zakk.au/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://zakk.au/ accesskey=h title="Zakk's Homepage (Alt + H)">Zakk's Homepage</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://zakk.au/zh-hant/ title=漢語 aria-label=漢語>Zh-Hant</a></li></ul></div></div><ul id=menu><li><a href=https://zakk.au/ title=Home><span>Home</span></a></li><li><a href=https://zakk.au/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://zakk.au/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://zakk.au/>Home</a>&nbsp;»&nbsp;<a href=https://zakk.au/zh-hant/>Zh-Hants</a>&nbsp;»&nbsp;<a href=https://zakk.au/zh-hant/posts/>文章</a></div><h1 class="post-title entry-hint-parent">Gentoo 安裝指南（新手）</h1><div class=post-meta><span title='2025-09-01 00:00:00 +0000 UTC'>September 1, 2025</span></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#-我的電腦配置示例>💻 我的電腦配置（示例）</a></li><li><a href=#0-下載與製作安裝媒體>0. 下載與製作安裝媒體</a><ul><li><a href=#01-下載-iso示例台灣-nchc>0.1 下載 ISO（示例：台灣 NCHC）</a></li><li><a href=#02-製作-usb-安裝碟>0.2 製作 USB 安裝碟</a></li></ul></li><li><a href=#1-開機與網路>1. 開機與網路</a><ul><li><a href=#11-確認-uefi--bios>1.1 確認 UEFI / BIOS</a></li><li><a href=#12-有線網路live-環境>1.2 有線網路（Live 環境）</a></li><li><a href=#13-wifi兩種工具擇一>1.3 Wi‑Fi（兩種工具擇一）</a></li></ul></li><li><a href=#2-磁碟分割lsblk-與-cfdisk>2. 磁碟分割（lsblk 與 cfdisk）</a></li><li><a href=#3-檔案系統格式化與掛載ext4--xfs--btrfs>3. 檔案系統格式化與掛載（ext4 / XFS / Btrfs）</a><ul><li><a href=#31-格式化>3.1 格式化</a></li><li><a href=#32-掛載完整流程>3.2 掛載（完整流程）</a></li></ul></li><li><a href=#4-下載-stage3掛載系統目錄與-chroot>4. 下載 Stage3、掛載系統目錄與 chroot</a><ul><li><a href=#41-選擇-stage3>4.1 選擇 Stage3</a></li><li><a href=#42-下載與解壓>4.2 下載與解壓</a></li><li><a href=#43-掛載系統目錄依-init-系統不同>4.3 掛載系統目錄（依 init 系統不同）</a></li><li><a href=#44-進入-chroot>4.4 進入 chroot</a></li></ul></li><li><a href=#5-portage-與鏡像源含-makeconf-完整示例>5. Portage 與鏡像源（含 makeconf 完整示例）</a><ul><li><a href=#51-同步-portage-樹>5.1 同步 Portage 樹</a></li><li><a href=#52-選擇鏡像源擇一>5.2 選擇鏡像源（擇一）</a></li><li><a href=#53-etcportagemakeconf-完整示例含註解>5.3 <code>/etc/portage/make.conf</code> 完整示例（含註解）</a></li></ul></li><li><a href=#6-use-flags-與-license新手解法>6. USE flags 與 License（新手解法）</a><ul><li><a href=#61-查詢與理解-use>6.1 查詢與理解 USE</a></li><li><a href=#62-對單一套件加入-use用-echo避免手動編輯出錯>6.2 對單一套件加入 USE（用 echo，避免手動編輯出錯）</a></li><li><a href=#63-同意授權例chrome>6.3 同意授權（例：Chrome）</a></li><li><a href=#64-關鍵詞如需解鎖軟體版本>6.4 關鍵詞（如需解鎖軟體版本）</a></li></ul></li><li><a href=#7-選擇-profile桌面伺服器>7. 選擇 Profile（桌面／伺服器）</a></li><li><a href=#8-本地化-localization語言與時區>8. 本地化 Localization（語言與時區）</a></li><li><a href=#9-內核選擇與編譯完整指令>9. 內核選擇與編譯（完整指令）</a><ul><li><a href=#91-最簡方案預編譯內核建議新手>9.1 最簡方案：預編譯內核（建議新手）</a></li><li><a href=#92-進階方案自行編譯gentoo-sources>9.2 進階方案：自行編譯（gentoo-sources）</a></li></ul></li><li><a href=#10-產生-fstab含-btrfs--ext4-範例>10. 產生 fstab（含 Btrfs / ext4 範例）</a></li><li><a href=#11-安裝開機器-grub含-os-prober>11. 安裝開機器 GRUB（含 os-prober）</a></li><li><a href=#12-啟用網路服務openrc--systemd>12. 啟用網路服務（OpenRC / systemd）</a></li><li><a href=#13-wayland--x11-選擇與-use>13. Wayland / X11 選擇與 USE</a></li><li><a href=#14-顯示卡與-cpu-微碼>14. 顯示卡與 CPU 微碼</a></li><li><a href=#15-桌面環境可選>15. 桌面環境（可選）</a></li><li><a href=#16-使用者與-sudo>16. 使用者與 sudo</a></li><li><a href=#17-ssh可選>17. SSH（可選）</a></li><li><a href=#18-重開機>18. 重開機</a></li></ul></nav></div></details></div><div class=post-content><div class=toc-embedded><nav id=TableOfContents><ul><li><a href=#-我的電腦配置示例>💻 我的電腦配置（示例）</a></li><li><a href=#0-下載與製作安裝媒體>0. 下載與製作安裝媒體</a><ul><li><a href=#01-下載-iso示例台灣-nchc>0.1 下載 ISO（示例：台灣 NCHC）</a></li><li><a href=#02-製作-usb-安裝碟>0.2 製作 USB 安裝碟</a></li></ul></li><li><a href=#1-開機與網路>1. 開機與網路</a><ul><li><a href=#11-確認-uefi--bios>1.1 確認 UEFI / BIOS</a></li><li><a href=#12-有線網路live-環境>1.2 有線網路（Live 環境）</a></li><li><a href=#13-wifi兩種工具擇一>1.3 Wi‑Fi（兩種工具擇一）</a></li></ul></li><li><a href=#2-磁碟分割lsblk-與-cfdisk>2. 磁碟分割（lsblk 與 cfdisk）</a></li><li><a href=#3-檔案系統格式化與掛載ext4--xfs--btrfs>3. 檔案系統格式化與掛載（ext4 / XFS / Btrfs）</a><ul><li><a href=#31-格式化>3.1 格式化</a></li><li><a href=#32-掛載完整流程>3.2 掛載（完整流程）</a></li></ul></li><li><a href=#4-下載-stage3掛載系統目錄與-chroot>4. 下載 Stage3、掛載系統目錄與 chroot</a><ul><li><a href=#41-選擇-stage3>4.1 選擇 Stage3</a></li><li><a href=#42-下載與解壓>4.2 下載與解壓</a></li><li><a href=#43-掛載系統目錄依-init-系統不同>4.3 掛載系統目錄（依 init 系統不同）</a></li><li><a href=#44-進入-chroot>4.4 進入 chroot</a></li></ul></li><li><a href=#5-portage-與鏡像源含-makeconf-完整示例>5. Portage 與鏡像源（含 makeconf 完整示例）</a><ul><li><a href=#51-同步-portage-樹>5.1 同步 Portage 樹</a></li><li><a href=#52-選擇鏡像源擇一>5.2 選擇鏡像源（擇一）</a></li><li><a href=#53-etcportagemakeconf-完整示例含註解>5.3 <code>/etc/portage/make.conf</code> 完整示例（含註解）</a></li></ul></li><li><a href=#6-use-flags-與-license新手解法>6. USE flags 與 License（新手解法）</a><ul><li><a href=#61-查詢與理解-use>6.1 查詢與理解 USE</a></li><li><a href=#62-對單一套件加入-use用-echo避免手動編輯出錯>6.2 對單一套件加入 USE（用 echo，避免手動編輯出錯）</a></li><li><a href=#63-同意授權例chrome>6.3 同意授權（例：Chrome）</a></li><li><a href=#64-關鍵詞如需解鎖軟體版本>6.4 關鍵詞（如需解鎖軟體版本）</a></li></ul></li><li><a href=#7-選擇-profile桌面伺服器>7. 選擇 Profile（桌面／伺服器）</a></li><li><a href=#8-本地化-localization語言與時區>8. 本地化 Localization（語言與時區）</a></li><li><a href=#9-內核選擇與編譯完整指令>9. 內核選擇與編譯（完整指令）</a><ul><li><a href=#91-最簡方案預編譯內核建議新手>9.1 最簡方案：預編譯內核（建議新手）</a></li><li><a href=#92-進階方案自行編譯gentoo-sources>9.2 進階方案：自行編譯（gentoo-sources）</a></li></ul></li><li><a href=#10-產生-fstab含-btrfs--ext4-範例>10. 產生 fstab（含 Btrfs / ext4 範例）</a></li><li><a href=#11-安裝開機器-grub含-os-prober>11. 安裝開機器 GRUB（含 os-prober）</a></li><li><a href=#12-啟用網路服務openrc--systemd>12. 啟用網路服務（OpenRC / systemd）</a></li><li><a href=#13-wayland--x11-選擇與-use>13. Wayland / X11 選擇與 USE</a></li><li><a href=#14-顯示卡與-cpu-微碼>14. 顯示卡與 CPU 微碼</a></li><li><a href=#15-桌面環境可選>15. 桌面環境（可選）</a></li><li><a href=#16-使用者與-sudo>16. 使用者與 sudo</a></li><li><a href=#17-ssh可選>17. SSH（可選）</a></li><li><a href=#18-重開機>18. 重開機</a></li></ul></nav></div><h2 id=-我的電腦配置示例>💻 我的電腦配置（示例）<a hidden class=anchor aria-hidden=true href=#-我的電腦配置示例>#</a></h2><ul><li><strong>CPU</strong>：AMD Ryzen 9 7950X3D（16C/32T）</li><li><strong>主機板</strong>：ASUS ROG STRIX X670E-A GAMING WIFI</li><li><strong>RAM</strong>：64GB DDR5</li><li><strong>GPU</strong>：NVIDIA RTX 4080 SUPER + AMD iGPU</li><li><strong>儲存</strong>：NVMe SSD</li><li><strong>雙系統</strong>：Windows 11 + Gentoo</li></ul><blockquote><p>以上為示例，步驟對多數 x86_64 平台通用。</p></blockquote><hr><h2 id=0-下載與製作安裝媒體>0. 下載與製作安裝媒體<a hidden class=anchor aria-hidden=true href=#0-下載與製作安裝媒體>#</a></h2><p><strong>官方鏡像列表</strong>：<a href=https://www.gentoo.org/downloads/mirrors/>https://www.gentoo.org/downloads/mirrors/</a></p><ul><li><strong>中國大陸</strong>：通常<strong>必須</strong>使用境內鏡像（中科大 USTC / 清華 TUNA / 阿里雲），否則下載速度與連線穩定性可能不足。</li><li><strong>台灣</strong>：建議使用 <strong>NCHC</strong>；<strong>澳洲</strong>：AARNET。</li></ul><h3 id=01-下載-iso示例台灣-nchc>0.1 下載 ISO（示例：台灣 NCHC）<a hidden class=anchor aria-hidden=true href=#01-下載-iso示例台灣-nchc>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>wget https://free.nchc.org.tw/gentoo/releases/amd64/autobuilds/current-install-amd64-minimal/install-amd64-minimal.iso
</span></span></code></pre></div><blockquote><p>若在中國大陸，可將網址換成：<code>https://mirrors.ustc.edu.cn/gentoo/</code>、<code>https://mirrors.tuna.tsinghua.edu.cn/gentoo/</code> 或 <code>https://mirrors.aliyun.com/gentoo/</code>。</p></blockquote><h3 id=02-製作-usb-安裝碟>0.2 製作 USB 安裝碟<a hidden class=anchor aria-hidden=true href=#02-製作-usb-安裝碟>#</a></h3><p><strong>Linux（dd）</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo dd <span style=color:#66d9ef>if</span><span style=color:#f92672>=</span>install-amd64-minimal.iso of<span style=color:#f92672>=</span>/dev/sdX bs<span style=color:#f92672>=</span>4M status<span style=color:#f92672>=</span>progress oflag<span style=color:#f92672>=</span>sync
</span></span></code></pre></div><blockquote><p>將 <code>sdX</code> 換成 USB 裝置名稱（如 <code>/dev/sdb</code>）。</p></blockquote><p><strong>Windows（Rufus）</strong>：<a href=https://rufus.ie/>https://rufus.ie/</a></p><ol><li>選擇 USB 與 Gentoo ISO</li><li>模式選 <strong>dd 模式</strong>（非 ISO 模式）</li><li>Start</li></ol><hr><h2 id=1-開機與網路>1. 開機與網路<a hidden class=anchor aria-hidden=true href=#1-開機與網路>#</a></h2><h3 id=11-確認-uefi--bios>1.1 確認 UEFI / BIOS<a hidden class=anchor aria-hidden=true href=#11-確認-uefi--bios>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ls /sys/firmware/efi
</span></span></code></pre></div><p>有輸出 → <strong>UEFI</strong>；沒有 → <strong>Legacy BIOS</strong>。</p><h3 id=12-有線網路live-環境>1.2 有線網路（Live 環境）<a hidden class=anchor aria-hidden=true href=#12-有線網路live-環境>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ip a
</span></span><span style=display:flex><span>dhcpcd eno1
</span></span><span style=display:flex><span>ping -c <span style=color:#ae81ff>3</span> gentoo.org
</span></span></code></pre></div><h3 id=13-wifi兩種工具擇一>1.3 Wi‑Fi（兩種工具擇一）<a hidden class=anchor aria-hidden=true href=#13-wifi兩種工具擇一>#</a></h3><p><strong>wpa_supplicant</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>iw dev
</span></span><span style=display:flex><span>wpa_passphrase <span style=color:#e6db74>&#34;SSID&#34;</span> <span style=color:#e6db74>&#34;PASSWORD&#34;</span> | tee /etc/wpa_supplicant/wpa_supplicant.conf
</span></span><span style=display:flex><span>wpa_supplicant -B -i wlp9s0 -c /etc/wpa_supplicant/wpa_supplicant.conf
</span></span><span style=display:flex><span>dhcpcd wlp9s0
</span></span><span style=display:flex><span>ping -c <span style=color:#ae81ff>3</span> gentoo.org
</span></span></code></pre></div><p><strong>iwd（更簡單，推薦新手）</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>emerge net-wireless/iwd
</span></span><span style=display:flex><span>systemctl enable iwd
</span></span><span style=display:flex><span>systemctl start iwd
</span></span><span style=display:flex><span>iwctl
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>iwd<span style=color:#f92672>]</span><span style=color:#75715e># device list</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>iwd<span style=color:#f92672>]</span><span style=color:#75715e># station wlp9s0 scan</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>iwd<span style=color:#f92672>]</span><span style=color:#75715e># station wlp9s0 get-networks</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>iwd<span style=color:#f92672>]</span><span style=color:#75715e># station wlp9s0 connect SSID</span>
</span></span></code></pre></div><blockquote><p>若 WPA3 不穩，先改用 WPA2 試試。</p></blockquote><hr><h2 id=2-磁碟分割lsblk-與-cfdisk>2. 磁碟分割（lsblk 與 cfdisk）<a hidden class=anchor aria-hidden=true href=#2-磁碟分割lsblk-與-cfdisk>#</a></h2><p>檢視磁碟：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lsblk -o NAME,SIZE,TYPE,MOUNTPOINT
</span></span></code></pre></div><p>範例：</p><pre tabindex=0><code>nvme0n1    476G disk
├─nvme0n1p1 512M part
├─nvme0n1p2   1G part
├─nvme0n1p3 100G part
└─nvme0n1p4 375G part
</code></pre><p>啟動分割工具（可選）：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cfdisk /dev/nvme0n1
</span></span></code></pre></div><p><strong>建議分割（UEFI）</strong>：</p><table><thead><tr><th>大小</th><th>檔案系統</th><th>掛載點</th><th>說明</th></tr></thead><tbody><tr><td>512M</td><td>FAT32</td><td>/efi</td><td>ESP（UEFI 系統分割區）</td></tr><tr><td>1G</td><td>ext4</td><td>/boot</td><td>kernel、initramfs</td></tr><tr><td>100G+</td><td>ext4 / XFS / Btrfs</td><td>/</td><td>根分割區</td></tr><tr><td>其餘</td><td>ext4 / XFS / Btrfs</td><td>/home</td><td>使用者家目錄</td></tr></tbody></table><blockquote><p>你也可以選擇只有 / 與 /efi 的簡化方案。</p></blockquote><hr><h2 id=3-檔案系統格式化與掛載ext4--xfs--btrfs>3. 檔案系統格式化與掛載（ext4 / XFS / Btrfs）<a hidden class=anchor aria-hidden=true href=#3-檔案系統格式化與掛載ext4--xfs--btrfs>#</a></h2><h3 id=31-格式化>3.1 格式化<a hidden class=anchor aria-hidden=true href=#31-格式化>#</a></h3><p><strong>ext4</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkfs.ext4 -L root /dev/nvme0n1p3
</span></span><span style=display:flex><span>mkfs.ext4 -L home /dev/nvme0n1p4
</span></span></code></pre></div><p><strong>XFS</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkfs.xfs -L root /dev/nvme0n1p3
</span></span><span style=display:flex><span>mkfs.xfs -L home /dev/nvme0n1p4
</span></span></code></pre></div><p><strong>Btrfs</strong>（必要時可用 <code>-f</code> 強制覆蓋，⚠️ 會抹除該分割區資料）：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkfs.btrfs -L rootfs /dev/nvme0n1p3
</span></span><span style=display:flex><span>mkfs.btrfs -L home   /dev/nvme0n1p4
</span></span><span style=display:flex><span><span style=color:#75715e># 需要強制時：mkfs.btrfs -f -L rootfs /dev/nvme0n1p3</span>
</span></span></code></pre></div><h3 id=32-掛載完整流程>3.2 掛載（完整流程）<a hidden class=anchor aria-hidden=true href=#32-掛載完整流程>#</a></h3><p><strong>ext4 / XFS</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mount /dev/nvme0n1p3 /mnt/gentoo
</span></span><span style=display:flex><span>mkdir -p /mnt/gentoo/<span style=color:#f92672>{</span>boot,home,efi<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>mount /dev/nvme0n1p4 /mnt/gentoo/home
</span></span><span style=display:flex><span>mount /dev/nvme0n1p2 /mnt/gentoo/boot
</span></span><span style=display:flex><span>mount /dev/nvme0n1p1 /mnt/gentoo/efi
</span></span></code></pre></div><p><strong>Btrfs（子卷）</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mount /dev/nvme0n1p3 /mnt/gentoo
</span></span><span style=display:flex><span>btrfs subvolume create /mnt/gentoo/@
</span></span><span style=display:flex><span>btrfs subvolume create /mnt/gentoo/@home
</span></span><span style=display:flex><span>umount /mnt/gentoo
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mount -o compress<span style=color:#f92672>=</span>zstd,subvol<span style=color:#f92672>=</span>@    /dev/nvme0n1p3 /mnt/gentoo
</span></span><span style=display:flex><span>mkdir -p /mnt/gentoo/<span style=color:#f92672>{</span>boot,home,efi<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>mount -o subvol<span style=color:#f92672>=</span>@home              /dev/nvme0n1p3 /mnt/gentoo/home
</span></span><span style=display:flex><span>mount /dev/nvme0n1p2 /mnt/gentoo/boot
</span></span><span style=display:flex><span>mount /dev/nvme0n1p1 /mnt/gentoo/efi
</span></span></code></pre></div><hr><h2 id=4-下載-stage3掛載系統目錄與-chroot>4. 下載 Stage3、掛載系統目錄與 chroot<a hidden class=anchor aria-hidden=true href=#4-下載-stage3掛載系統目錄與-chroot>#</a></h2><h3 id=41-選擇-stage3>4.1 選擇 Stage3<a hidden class=anchor aria-hidden=true href=#41-選擇-stage3>#</a></h3><ul><li>建議下載 <strong>標準 Stage3（glibc）</strong>，依需求選 <strong>OpenRC</strong> 或 <strong>systemd</strong>。</li><li>「desktop」Stage3 只是預設桌面化 USE，<strong>非必須</strong>；用標準 Stage3 + 正確 <strong>Profile</strong> 更靈活。</li></ul><h3 id=42-下載與解壓>4.2 下載與解壓<a hidden class=anchor aria-hidden=true href=#42-下載與解壓>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd /mnt/gentoo
</span></span><span style=display:flex><span>links https://www.gentoo.org/downloads/mirrors/
</span></span><span style=display:flex><span>tar xpvf stage3-*.tar.xz --xattrs-include<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;*.*&#39;</span> --numeric-owner
</span></span></code></pre></div><blockquote><p>同 ISO，一樣可選擇就近的鏡像源下載 Stage3。</p></blockquote><h3 id=43-掛載系統目錄依-init-系統不同>4.3 掛載系統目錄（依 init 系統不同）<a hidden class=anchor aria-hidden=true href=#43-掛載系統目錄依-init-系統不同>#</a></h3><p><strong>OpenRC</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mount -t proc /proc /mnt/gentoo/proc
</span></span><span style=display:flex><span>mount --rbind /sys /mnt/gentoo/sys
</span></span><span style=display:flex><span>mount --rbind /dev /mnt/gentoo/dev
</span></span></code></pre></div><p><strong>systemd</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mount -t proc /proc /mnt/gentoo/proc
</span></span><span style=display:flex><span>mount --rbind /sys /mnt/gentoo/sys <span style=color:#f92672>&amp;&amp;</span> mount --make-rslave /mnt/gentoo/sys
</span></span><span style=display:flex><span>mount --rbind /dev /mnt/gentoo/dev <span style=color:#f92672>&amp;&amp;</span> mount --make-rslave /mnt/gentoo/dev
</span></span><span style=display:flex><span>mount --rbind /run /mnt/gentoo/run <span style=color:#f92672>&amp;&amp;</span> mount --make-rslave /mnt/gentoo/run
</span></span></code></pre></div><h3 id=44-進入-chroot>4.4 進入 chroot<a hidden class=anchor aria-hidden=true href=#44-進入-chroot>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chroot /mnt/gentoo /bin/bash
</span></span><span style=display:flex><span>source /etc/profile
</span></span><span style=display:flex><span>export PS1<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;(chroot) </span>$PS1<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><hr><h2 id=5-portage-與鏡像源含-makeconf-完整示例>5. Portage 與鏡像源（含 makeconf 完整示例）<a hidden class=anchor aria-hidden=true href=#5-portage-與鏡像源含-makeconf-完整示例>#</a></h2><h3 id=51-同步-portage-樹>5.1 同步 Portage 樹<a hidden class=anchor aria-hidden=true href=#51-同步-portage-樹>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>emerge-webrsync
</span></span><span style=display:flex><span>emerge --sync
</span></span></code></pre></div><h3 id=52-選擇鏡像源擇一>5.2 選擇鏡像源（擇一）<a hidden class=anchor aria-hidden=true href=#52-選擇鏡像源擇一>#</a></h3><p><strong>互動工具</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>emerge --ask app-portage/mirrorselect
</span></span><span style=display:flex><span>mirrorselect -i -o &gt;&gt; /etc/portage/make.conf
</span></span></code></pre></div><p><strong>手動指定（建議最終只保留一條）</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>echo <span style=color:#e6db74>&#39;GENTOO_MIRRORS=&#34;https://free.nchc.org.tw/gentoo/&#34;&#39;</span> &gt;&gt; /etc/portage/make.conf
</span></span></code></pre></div><blockquote><p>⚠️ 避免重複與衝突：<code>mirrorselect</code> 可能加入多條鏡像，建議最後僅保留速度最快的一條。</p></blockquote><h3 id=53-etcportagemakeconf-完整示例含註解>5.3 <code>/etc/portage/make.conf</code> 完整示例（含註解）<a hidden class=anchor aria-hidden=true href=#53-etcportagemakeconf-完整示例含註解>#</a></h3><pre tabindex=0><code class=language-conf data-lang=conf># 編譯器參數：O2 與 pipe 足夠，多數情況不需要 -Ofast
COMMON_FLAGS=&#34;-march=native -O2 -pipe&#34;

# 平行編譯：通常設成 CPU 執行緒數
MAKEOPTS=&#34;-j32&#34;

# Portage 預設行為：互動、詳細、拉進建置依賴、完整圖
EMERGE_DEFAULT_OPTS=&#34;--ask --verbose --with-bdeps=y --complete-graph=y&#34;

# 鏡像：請最終僅保留一條（下例為台灣 NCHC）
GENTOO_MIRRORS=&#34;https://free.nchc.org.tw/gentoo/&#34;

# 全域 USE（兩套典型選擇二擇一；也可同時保留 xwayland 做相容）
USE=&#34;wayland egl pipewire vulkan&#34;
# USE=&#34;X xwayland egl pipewire vulkan&#34;

# 顯示卡：請只填你的硬體（不要全抄）
# 例：NVIDIA 新卡
VIDEO_CARDS=&#34;nvidia&#34;
# 例：AMD
# VIDEO_CARDS=&#34;amdgpu radeonsi&#34;
# 例：Intel
# VIDEO_CARDS=&#34;intel i965 iris&#34;
# 例：老 NVIDIA 或想用開源
# VIDEO_CARDS=&#34;nouveau&#34;

# 接受授權：新手可暫時開放全部，之後細化至 package.license
ACCEPT_LICENSE=&#34;*&#34;
</code></pre><hr><h2 id=6-use-flags-與-license新手解法>6. USE flags 與 License（新手解法）<a hidden class=anchor aria-hidden=true href=#6-use-flags-與-license新手解法>#</a></h2><h3 id=61-查詢與理解-use>6.1 查詢與理解 USE<a hidden class=anchor aria-hidden=true href=#61-查詢與理解-use>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>emerge -pv firefox
</span></span></code></pre></div><p>閱讀輸出中 <code>USE="..."</code> 與遮罩提示，了解需要啟用或停用哪些旗標。</p><h3 id=62-對單一套件加入-use用-echo避免手動編輯出錯>6.2 對單一套件加入 USE（用 echo，避免手動編輯出錯）<a hidden class=anchor aria-hidden=true href=#62-對單一套件加入-use用-echo避免手動編輯出錯>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>echo <span style=color:#e6db74>&#34;media-video/ffmpeg X wayland&#34;</span> &gt;&gt; /etc/portage/package.use/ffmpeg
</span></span></code></pre></div><h3 id=63-同意授權例chrome>6.3 同意授權（例：Chrome）<a hidden class=anchor aria-hidden=true href=#63-同意授權例chrome>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>echo <span style=color:#e6db74>&#34;www-client/google-chrome google-chrome&#34;</span> &gt;&gt; /etc/portage/package.license
</span></span></code></pre></div><h3 id=64-關鍵詞如需解鎖軟體版本>6.4 關鍵詞（如需解鎖軟體版本）<a hidden class=anchor aria-hidden=true href=#64-關鍵詞如需解鎖軟體版本>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>echo <span style=color:#e6db74>&#34;www-client/google-chrome ~amd64&#34;</span> &gt;&gt; /etc/portage/package.accept_keywords
</span></span></code></pre></div><blockquote><p>僅在需要較新（測試）版本時使用。</p></blockquote><hr><h2 id=7-選擇-profile桌面伺服器>7. 選擇 Profile（桌面／伺服器）<a hidden class=anchor aria-hidden=true href=#7-選擇-profile桌面伺服器>#</a></h2><p>列出可用 Profile：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>eselect profile list
</span></span></code></pre></div><p>常見選擇：</p><ul><li><strong>KDE + systemd</strong>：<code>default/linux/amd64/23.0/desktop/plasma/systemd</code></li><li><strong>GNOME + systemd</strong>：<code>default/linux/amd64/23.0/desktop/gnome/systemd</code></li><li><strong>桌面 + OpenRC</strong>：<code>default/linux/amd64/23.0/desktop</code> 或對應 plasma/openrc 變體</li><li><strong>伺服器</strong>：<code>default/linux/amd64/23.0</code>（較精簡）</li></ul><p>套用並更新系統：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>eselect profile set &lt;編號&gt;
</span></span><span style=display:flex><span>emerge -avuDN @world
</span></span></code></pre></div><blockquote><p>Profile 會設定一組預設 USE 與方向；需要時可透過 <code>package.use</code> 做細部微調。</p></blockquote><hr><h2 id=8-本地化-localization語言與時區>8. 本地化 Localization（語言與時區）<a hidden class=anchor aria-hidden=true href=#8-本地化-localization語言與時區>#</a></h2><p><strong>語言（/etc/locale.gen）</strong>：</p><pre tabindex=0><code class=language-conf data-lang=conf>en_US.UTF-8 UTF-8
zh_TW.UTF-8 UTF-8
</code></pre><p>產生並套用：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>locale-gen
</span></span><span style=display:flex><span>eselect locale set en_US.utf8
</span></span></code></pre></div><p><strong>時區</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ls /usr/share/zoneinfo
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;Asia/Taipei&#34;</span> &gt; /etc/timezone
</span></span><span style=display:flex><span>emerge --config sys-libs/timezone-data
</span></span></code></pre></div><p>完整清單：<a href=https://en.wikipedia.org/wiki/List_of_tz_database_time_zones>https://en.wikipedia.org/wiki/List_of_tz_database_time_zones</a></p><p><strong>字型與輸入法（可選）</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>emerge media-fonts/noto-cjk
</span></span><span style=display:flex><span>emerge app-i18n/fcitx5 app-i18n/fcitx5-rime
</span></span></code></pre></div><hr><h2 id=9-內核選擇與編譯完整指令>9. 內核選擇與編譯（完整指令）<a hidden class=anchor aria-hidden=true href=#9-內核選擇與編譯完整指令>#</a></h2><h3 id=91-最簡方案預編譯內核建議新手>9.1 最簡方案：預編譯內核（建議新手）<a hidden class=anchor aria-hidden=true href=#91-最簡方案預編譯內核建議新手>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>emerge sys-kernel/gentoo-kernel-bin
</span></span></code></pre></div><h3 id=92-進階方案自行編譯gentoo-sources>9.2 進階方案：自行編譯（gentoo-sources）<a hidden class=anchor aria-hidden=true href=#92-進階方案自行編譯gentoo-sources>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>emerge sys-kernel/gentoo-sources
</span></span><span style=display:flex><span>cd /usr/src/linux
</span></span><span style=display:flex><span>make menuconfig   <span style=color:#75715e># 啟用你的硬體：NVMe、ext4、（需要則）Btrfs、GPU、USB、網卡等</span>
</span></span><span style=display:flex><span>make -j<span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>nproc<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>make modules_install
</span></span><span style=display:flex><span>make install
</span></span></code></pre></div><p><strong>可選：建立 initramfs（Btrfs、LUKS、RAID 或模組化驅動建議使用）</strong></p><ul><li>用 <strong>dracut</strong>：<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>emerge sys-kernel/dracut
</span></span><span style=display:flex><span>dracut --kver <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>ls /lib/modules | sort -V | tail -1<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div></li><li>用 <strong>genkernel</strong>：<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>emerge sys-kernel/genkernel
</span></span><span style=display:flex><span>genkernel initramfs
</span></span></code></pre></div></li></ul><hr><h2 id=10-產生-fstab含-btrfs--ext4-範例>10. 產生 fstab（含 Btrfs / ext4 範例）<a hidden class=anchor aria-hidden=true href=#10-產生-fstab含-btrfs--ext4-範例>#</a></h2><p>查詢 UUID：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>blkid
</span></span><span style=display:flex><span>lsblk -f
</span></span></code></pre></div><p><strong>ext4</strong>：</p><pre tabindex=0><code class=language-fstab data-lang=fstab>UUID=&lt;UUID-ESP&gt;  /efi   vfat  noatime,umask=0077 0 2
UUID=&lt;UUID-BOOT&gt; /boot  ext4  noatime            0 2
UUID=&lt;UUID-ROOT&gt; /      ext4  noatime            0 1
UUID=&lt;UUID-HOME&gt; /home  ext4  noatime            0 2
</code></pre><p><strong>Btrfs（子卷）</strong>：</p><pre tabindex=0><code class=language-fstab data-lang=fstab>UUID=&lt;UUID-ESP&gt;  /efi   vfat   noatime,umask=0077 0 2
UUID=&lt;UUID-ROOT&gt; /      btrfs  noatime,compress=zstd,subvol=@     0 1
UUID=&lt;UUID-ROOT&gt; /home  btrfs  noatime,compress=zstd,subvol=@home 0 2
</code></pre><hr><h2 id=11-安裝開機器-grub含-os-prober>11. 安裝開機器 GRUB（含 os-prober）<a hidden class=anchor aria-hidden=true href=#11-安裝開機器-grub含-os-prober>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>emerge grub efibootmgr
</span></span><span style=display:flex><span>grub-install --target<span style=color:#f92672>=</span>x86_64-efi --efi-directory<span style=color:#f92672>=</span>/efi --bootloader-id<span style=color:#f92672>=</span>Gentoo
</span></span><span style=display:flex><span>emerge --ask sys-boot/os-prober
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#39;GRUB_DISABLE_OS_PROBER=false&#39;</span> &gt;&gt; /etc/default/grub
</span></span><span style=display:flex><span>grub-mkconfig -o /boot/grub/grub.cfg
</span></span></code></pre></div><p>若 root 用 Btrfs，建議安裝工具：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>emerge --ask sys-fs/btrfs-progs
</span></span></code></pre></div><hr><h2 id=12-啟用網路服務openrc--systemd>12. 啟用網路服務（OpenRC / systemd）<a hidden class=anchor aria-hidden=true href=#12-啟用網路服務openrc--systemd>#</a></h2><p><strong>systemd（桌面常用）</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>emerge net-misc/networkmanager
</span></span><span style=display:flex><span>systemctl enable NetworkManager
</span></span></code></pre></div><p><strong>OpenRC（傳統）</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>emerge net-misc/dhcpcd
</span></span><span style=display:flex><span>rc-update add dhcpcd default
</span></span></code></pre></div><hr><h2 id=13-wayland--x11-選擇與-use>13. Wayland / X11 選擇與 USE<a hidden class=anchor aria-hidden=true href=#13-wayland--x11-選擇與-use>#</a></h2><p><strong>Wayland 為主</strong>：</p><pre tabindex=0><code class=language-conf data-lang=conf>USE=&#34;wayland egl pipewire vulkan&#34;
</code></pre><p><strong>X11 相容性較佳（舊程式／部分遊戲）</strong>：</p><pre tabindex=0><code class=language-conf data-lang=conf>USE=&#34;X xwayland egl pipewire vulkan&#34;
</code></pre><blockquote><p>兩者都可用，但請依需求調整。</p></blockquote><hr><h2 id=14-顯示卡與-cpu-微碼>14. 顯示卡與 CPU 微碼<a hidden class=anchor aria-hidden=true href=#14-顯示卡與-cpu-微碼>#</a></h2><p><strong>NVIDIA 專有驅動</strong>：</p><pre tabindex=0><code class=language-conf data-lang=conf>VIDEO_CARDS=&#34;nvidia&#34;
</code></pre><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>emerge x11-drivers/nvidia-drivers
</span></span></code></pre></div><p><strong>NVIDIA 開源 nouveau（效能較低）</strong>：</p><pre tabindex=0><code class=language-conf data-lang=conf>VIDEO_CARDS=&#34;nouveau&#34;
</code></pre><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>emerge x11-base/xorg-drivers
</span></span></code></pre></div><p><strong>AMD</strong>：</p><pre tabindex=0><code class=language-conf data-lang=conf>VIDEO_CARDS=&#34;amdgpu radeonsi&#34;
</code></pre><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>emerge mesa vulkan-loader
</span></span></code></pre></div><p><strong>Intel</strong>：</p><pre tabindex=0><code class=language-conf data-lang=conf>VIDEO_CARDS=&#34;intel i965 iris&#34;
</code></pre><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>emerge mesa vulkan-loader
</span></span></code></pre></div><p><strong>CPU 微碼</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Intel</span>
</span></span><span style=display:flex><span>emerge sys-firmware/intel-microcode
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># AMD</span>
</span></span><span style=display:flex><span>emerge sys-firmware/amd-ucode
</span></span></code></pre></div><hr><h2 id=15-桌面環境可選>15. 桌面環境（可選）<a hidden class=anchor aria-hidden=true href=#15-桌面環境可選>#</a></h2><p><strong>KDE Plasma</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>emerge kde-plasma/plasma-meta x11-misc/sddm x11-base/xwayland
</span></span><span style=display:flex><span>systemctl enable sddm
</span></span></code></pre></div><p><strong>GNOME</strong>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>emerge gnome-base/gnome gnome-base/gdm
</span></span><span style=display:flex><span>systemctl enable gdm
</span></span></code></pre></div><hr><h2 id=16-使用者與-sudo>16. 使用者與 sudo<a hidden class=anchor aria-hidden=true href=#16-使用者與-sudo>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>passwd
</span></span><span style=display:flex><span>useradd -m -G wheel,audio,video,usb -s /bin/bash zakk
</span></span><span style=display:flex><span>passwd zakk
</span></span><span style=display:flex><span>emerge app-admin/sudo
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;%wheel ALL=(ALL) ALL&#34;</span> &gt;&gt; /etc/sudoers
</span></span></code></pre></div><blockquote><p>⚠️ <strong>注意</strong>：這裡的 <code>zakk</code> 只是範例，請替換為你自己的使用者名稱。</p></blockquote><hr><h2 id=17-ssh可選>17. SSH（可選）<a hidden class=anchor aria-hidden=true href=#17-ssh可選>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>emerge net-misc/openssh
</span></span><span style=display:flex><span>systemctl enable sshd <span style=color:#f92672>&amp;&amp;</span> systemctl start sshd
</span></span></code></pre></div><hr><h2 id=18-重開機>18. 重開機<a hidden class=anchor aria-hidden=true href=#18-重開機>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>exit
</span></span><span style=display:flex><span>umount -R /mnt/gentoo
</span></span><span style=display:flex><span>reboot
</span></span></code></pre></div><hr><h1 id=-常見問題-faq>💡 常見問題 FAQ<a hidden class=anchor aria-hidden=true href=#-常見問題-faq>#</a></h1><ul><li><strong>下載慢／超時</strong>：中國大陸請用境內鏡像；其他地區選最近鏡像。</li><li><strong>Wi‑Fi 連不上</strong>：先檢查驅動與介面名稱，WPA3 不穩改 WPA2。</li><li><strong>Wayland / X11</strong>：AMD/Intel 新平台可優先 Wayland；相容性需求選 X11 + xwayland。</li><li><strong>NVIDIA 選擇</strong>：RTX 4000 建議 <code>nvidia-drivers</code>；舊卡或純開源取向可試 <code>nouveau</code>（效能較低）。</li><li><strong>USE 衝突</strong>：<code>emerge -pv &lt;套件></code> 看提示，將建議的 USE 寫入 <code>/etc/portage/package.use/</code>。</li><li><strong>License 阻擋</strong>：把授權加入 <code>/etc/portage/package.license</code>。</li><li><strong>需要新版</strong>：用 <code>/etc/portage/package.accept_keywords</code> 解鎖。</li><li><strong>Btrfs + LUKS/RAID</strong>：建議使用 initramfs（dracut 或 genkernel）。</li></ul><hr><h1 id=-參考>📎 參考<a hidden class=anchor aria-hidden=true href=#-參考>#</a></h1><ul><li>Gentoo Handbook：<a href=https://wiki.gentoo.org/wiki/Handbook:AMD64/Full/Installation>https://wiki.gentoo.org/wiki/Handbook:AMD64/Full/Installation</a></li><li>Bitbili：<a href=https://bitbili.net/gentoo-linux-installation-and-usage-tutorial.html>https://bitbili.net/gentoo-linux-installation-and-usage-tutorial.html</a></li><li>Rufus：<a href=https://rufus.ie/>https://rufus.ie/</a></li><li>時區列表（tz database）：<a href=https://en.wikipedia.org/wiki/List_of_tz_database_time_zones>https://en.wikipedia.org/wiki/List_of_tz_database_time_zones</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://zakk.au/tags/gentoo/>Gentoo</a></li><li><a href=https://zakk.au/tags/linux/>Linux</a></li><li><a href=https://zakk.au/tags/openrc/>OpenRC</a></li><li><a href=https://zakk.au/tags/systemd/>Systemd</a></li><li><a href=https://zakk.au/tags/kde/>KDE</a></li><li><a href=https://zakk.au/tags/gnome/>GNOME</a></li><li><a href=https://zakk.au/tags/ssh/>SSH</a></li><li><a href=https://zakk.au/tags/wayland/>Wayland</a></li><li><a href=https://zakk.au/tags/btrfs/>Btrfs</a></li><li><a href=https://zakk.au/tags/uefi/>UEFI</a></li><li><a href=https://zakk.au/tags/nvidia/>NVIDIA</a></li><li><a href=https://zakk.au/tags/amd/>AMD</a></li><li><a href=https://zakk.au/tags/intel/>Intel</a></li><li><a href=https://zakk.au/tags/iwd/>Iwd</a></li><li><a href=https://zakk.au/tags/wpa_supplicant/>Wpa_supplicant</a></li></ul><nav class=paginav><a class=next href=https://zakk.au/zh-hant/posts/life-update/><span class=title>Next »</span><br><span>近況更新</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://zakk.au/>Zakk's Homepage</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>